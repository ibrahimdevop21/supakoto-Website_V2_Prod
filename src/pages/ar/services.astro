---
import Layout from '../../layouts/Layout.astro';
import { t } from '../../i18n/index';
import OurServices from '@services/OurServices.astro';
import ServiceTiers from '@services/ServiceTiers';
import TechCraftsmanship from '@services/TechCraftsmanship';
import FinishOptions from '@services/FinishOptions';

import LifestyleUseCases from '@services/LifestyleUseCases';
import ServicesCTA from '@services/ServicesCTA';
import { getSEOData } from '../../utils/seo-content';
import { generateBreadcrumbSchema, generateServiceSchema } from '../../utils/seo-schemas';

const pathname = Astro.url.pathname;
const locale: 'en' | 'ar' = pathname.startsWith('/ar') ? 'ar' : 'en';
const currentLang = locale;
const rtl = currentLang === 'ar';

// Get SEO-optimized content for Arabic services page
const seoData = getSEOData('services', currentLang);

// Generate breadcrumb and service schemas
const breadcrumbSchema = generateBreadcrumbSchema([
	{ name: 'الرئيسية', url: 'https://supakoto.com/ar' },
	{ name: 'خدماتنا', url: 'https://supakoto.com/ar/services' }
]);

const serviceSchema = generateServiceSchema('Paint Protection Film Services', currentLang);
---

<Layout 
	title={seoData.title}
	description={seoData.description}
	keywords={seoData.keywords}
	type="service"
	schema={[breadcrumbSchema, serviceSchema]}
>
	<main id="content" class="flex flex-col">
		<!-- Our Services Section -->
		<OurServices locale={locale} />

		<!-- Service Tiers Section -->
		<section id="tiers" class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<ServiceTiers client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>

		<!-- Technology & Craftsmanship Section -->
		<section class="py-12 md:py-16 bg-muted/30">
			<div class="container mx-auto px-4">
				<TechCraftsmanship client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>

		<!-- Finish Options Section -->
		<section class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<FinishOptions client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>



		<!-- Lifestyle Use Cases Section -->
		<section class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<LifestyleUseCases client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>



		<!-- Closing CTA Section -->
		<ServicesCTA client:visible currentLocale={currentLang} isRTL={rtl} />
	</main>

	<!-- Service Schema for SEO -->
	<script type="application/ld+json">
		{JSON.stringify(generateServiceSchema(locale === 'ar' ? 'خدمات حماية السيارات' : 'Automotive Protection Services', locale))}
	</script>
</Layout>

