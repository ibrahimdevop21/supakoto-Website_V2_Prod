---
import Layout from '../layouts/Layout.astro';
import SimpleGallery, { type SimpleGalleryImage } from '../components/gallery/SimpleGallery';
import { t } from '../i18n';
import { getSEOData } from '../utils/seo-content';
import { generateBreadcrumbSchema } from '../utils/seo-schemas';

const currentLang = (Astro.currentLocale || 'en') as 'en' | 'ar';
const rtl = currentLang === 'ar';

// Get SEO-optimized content
const seoData = getSEOData('gallery', currentLang);

// Generate breadcrumb schema for gallery page
const breadcrumbSchema = generateBreadcrumbSchema([
	{ name: currentLang === 'ar' ? 'الرئيسية' : 'Home', url: 'https://supakoto.com' },
	{ name: currentLang === 'ar' ? 'معرض الأعمال' : 'Gallery', url: `https://supakoto.com${currentLang === 'ar' ? '/ar' : ''}/gallery` }
]);

// Generate gallery images from the 238 webp files in public/gallery with descriptive alt text
const images: SimpleGalleryImage[] = Array.from({ length: 238 }, (_, i) => {
  const imageNumber = String(i + 1).padStart(3, '0');
  
  // Generate more descriptive alt text for better SEO
  const englishAltTexts = [
    `Luxury car with Paint Protection Film PPF installed - front view ${imageNumber}`,
    `Professional PPF installation on sports car - project ${imageNumber}`,
    `Vehicle paint protection using advanced PPF technology ${imageNumber}`,
    `Car protected with high-quality transparent PPF film ${imageNumber}`,
    `Detailed view of professional paint protection film installation ${imageNumber}`
  ];
  
  const arabicAltTexts = [
    `سيارة فاخرة مع تركيب فيلم حماية الطلاء PPF - منظر أمامي ${imageNumber}`,
    `تركيب احترافي لفيلم حماية الطلاء على سيارة رياضية ${imageNumber}`,
    `حماية طلاء السيارة بتقنية PPF المتقدمة - مشروع ${imageNumber}`,
    `سيارة محمية بفيلم PPF شفاف عالي الجودة ${imageNumber}`,
    `تفاصيل تركيب فيلم حماية الطلاء الاحترافي ${imageNumber}`
  ];
  
  const altText = currentLang === 'ar' 
    ? arabicAltTexts[i % arabicAltTexts.length]
    : englishAltTexts[i % englishAltTexts.length];
  
  return {
    src: `/gallery/supa-${imageNumber}.webp`,
    alt: altText,
    caption: currentLang === 'ar'
      ? `تركيب حماية طلاء احترافي — مشروع ${imageNumber}`
      : `Professional PPF Installation — Project ${imageNumber}`
  };
});
---

<Layout 
	title={seoData.title}
	description={seoData.description}
	keywords={seoData.keywords}
	type="website"
	schema={breadcrumbSchema}
>
  <!-- Main content with consistent spacing - matching home/services page structure -->
  <section class="py-16 md:py-20 lg:py-24">
    <!-- Gallery Hero Section with proper spacing -->
    <div class="mb-24 md:mb-32">
      <div class="text-center">
        <h1 class="text-4xl md:text-6xl font-bold bg-gradient-to-r from-red-600 via-red-500 to-orange-500 bg-clip-text text-transparent mb-6 tracking-tight">
          {t('gallery.hero.title', {}, Astro)}
        </h1>
        <p class="text-xl md:text-2xl text-gray-300 mb-8 max-w-3xl mx-auto leading-relaxed">
          {t('gallery.hero.subtitle', {}, Astro)}
        </p>
        <div class="w-24 h-1 bg-gradient-to-r from-red-500 to-red-600 mx-auto rounded-full"></div>
      </div>
    </div>
    
    <!-- Gallery Section -->
    <div class="container mx-auto px-4 sm:px-6 lg:px-8">
      <SimpleGallery 
        client:load 
        locale={currentLang as "en" | "ar"} 
        images={images}
        heightClass="h-[60svh] md:h-[68vh]"
        showCounter={true}
        showCaptions={true}
      />
    </div>
  </section>
</Layout>


