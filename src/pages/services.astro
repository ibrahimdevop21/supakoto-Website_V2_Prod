---
import Layout from '../layouts/Layout.astro';
import OurServices from '../components/services/OurServices.astro';
import ServiceTiers from '../components/services/ServiceTiers';
import FinishOptions from '../components/services/FinishOptions';
import TechCraftsmanship from '../components/services/TechCraftsmanship';
import PPFComparison from '../components/shared/PPFComparison';

import LifestyleUseCases from '../components/services/LifestyleUseCases';
import ServicesCTA from '../components/services/ServicesCTA';
import { getSEOData } from '../utils/seo-content';
import { generateBreadcrumbSchema, generateServiceSchema } from '../utils/seo-schemas';

const pathname = Astro.url.pathname;
const locale: 'en' | 'ar' = pathname.startsWith('/ar') ? 'ar' : 'en';
const currentLang = locale;
const rtl = currentLang === 'ar';

// Get SEO-optimized content
const seoData = getSEOData('services', currentLang);

// Generate breadcrumb and service schemas
const breadcrumbSchema = generateBreadcrumbSchema([
	{ name: currentLang === 'ar' ? 'الرئيسية' : 'Home', url: 'https://supakoto.com' },
	{ name: currentLang === 'ar' ? 'خدماتنا' : 'Our Services', url: `https://supakoto.com${currentLang === 'ar' ? '/ar' : ''}/services` }
]);

const serviceSchema = generateServiceSchema(
	currentLang === 'ar' ? 'خدمات حماية الطلاء الاحترافية' : 'Professional Paint Protection Film Services',
	currentLang
);

const combinedSchema = [breadcrumbSchema, serviceSchema];
---

<Layout 
	title={seoData.title}
	description={seoData.description}
	keywords={seoData.keywords}
	type="service"
	schema={combinedSchema}
>
	<main id="content" class="flex flex-col">
		<!-- Our Services Section -->
		<OurServices locale={locale} />

		<!-- Service Tiers Section -->
		<section id="tiers" class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<ServiceTiers client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>

		<!-- Technology & Craftsmanship Section -->
		<section class="py-12 md:py-16 bg-muted/30">
			<div class="container mx-auto px-4">
				<TechCraftsmanship client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>

		<!-- Finish Options Section -->
		<section class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<FinishOptions client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>



		<!-- Lifestyle Use Cases Section -->
		<section class="py-12 md:py-16">
			<div class="container mx-auto px-4">
				<LifestyleUseCases client:visible currentLocale={currentLang} isRTL={rtl} />
			</div>
		</section>



		<!-- Closing CTA Section -->
		<ServicesCTA client:visible currentLocale={currentLang} isRTL={rtl} />
	</main>

	<!-- Service Schema for SEO -->
	<script type="application/ld+json">
		{JSON.stringify(generateServiceSchema(locale === 'ar' ? 'خدمات حماية السيارات' : 'Automotive Protection Services', locale))}
	</script>
</Layout>
