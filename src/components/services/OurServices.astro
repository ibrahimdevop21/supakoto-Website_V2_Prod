---
/**
 * OurServices.astro
 * Dark, glassy services grid with EN/AR copy and no client JS.
 */
const { locale = 'en' } = Astro.props as { locale?: 'en' | 'ar' }
const ar = locale === 'ar'
const dir = ar ? 'rtl' : 'ltr'

const t = {
  title: ar ? 'خدماتنا' : 'Our Services',
  subtitle: ar
    ? 'حماية متقدمة لسيارتك وزجاج المباني مع حلول عزل حراري وحماية طلاء متقدمة.'
    : 'Advanced protection for your car and building glass with premium PPF, heat/UV films and nano coatings.',
  cta: ar ? 'احجز استشارة' : 'Book a Consultation',
  learn: ar ? 'اعرف المزيد' : 'Learn more',
}

type Item = {
  slug: string
  name_en: string
  name_ar: string
  desc_en: string
  desc_ar: string
  badge?: string
  href?: string
  icon: 'shield' | 'sun' | 'droplet' | 'headlight' | 'interior' | 'wheels'
}

const items: Item[] = [
  {
    slug: 'ppf',
    name_en: 'Paint Protection Film (PPF)',
    name_ar: 'حماية الطلاء (PPF)',
    desc_en:
      'Self-healing TPU film for rock chips, scratches and road rash. Options: full body, front kit, high-impact zones.',
    desc_ar:
      'طبقة TPU ذاتية الإصلاح لحماية الطلاء من الخدوش ورش الحصى. خيارات: كامل السيارة، المقدمة، والمناطق الأكثر تعرضاً.',
    badge: 'Most Popular',
    href: '/services#ppf',
    icon: 'shield',
  },
  {
    slug: 'heat-uv-auto',
    name_en: 'Automotive Heat & UV Insulation',
    name_ar: 'عزل حراري وحماية من الأشعة للسيارات',
    desc_en:
      'IR-rejecting films that keep cabins cooler, block UV and glare, and protect interiors. Legal shades available.',
    desc_ar:
      'أفلام عزل حراري تحجب الأشعة تحت الحمراء وUV وتقلل الوهج وتحافظ على المقصورة أبرد. درجات سماحية نظامية.',
    href: '/services#auto-tint',
    icon: 'sun',
  },
  {
    slug: 'heat-uv-arch',
    name_en: 'Architectural Heat & UV Insulation',
    name_ar: 'عزل حراري للمباني والزجاج',
    desc_en:
      'High-performance window films for homes & commercial buildings: energy savings, UV block, privacy options.',
    desc_ar:
      'أفلام نوافذ عالية الأداء للمنازل والمباني: توفير الطاقة، حجب الأشعة فوق البنفسجية، وخيارات خصوصية متعددة.',
    href: '/services#arch-tint',
    icon: 'sun',
  },
  {
    slug: 'nano-ceramic',
    name_en: 'Nano-Ceramic Coating',
    name_ar: 'طلاء نانو سيراميك',
    desc_en:
      'Hydrophobic protection for paint, trims, interior panels and leather. Easier washing, rich gloss, longer life.',
    desc_ar:
      'حماية طاردة للماء على الطلاء والتجهيزات وداخلية السيارة والجلد. غسيل أسهل ولمعان أعمق وعمر أطول.',
    href: '/services#nano',
    icon: 'droplet',
  },
  {
    slug: 'headlight',
    name_en: 'Headlight & Taillight Protection',
    name_ar: 'حماية المصابيح الأمامية والخلفية',
    desc_en:
      'Impact-resistant, optically clear films that stop pitting and hazing; optional light smoke styling.',
    desc_ar:
      'أفلام شفافة مقاومة للصدمات تمنع تعتيم وخدش العدسات؛ خيار تظليل خفيف متاح.',
    href: '/services#lights',
    icon: 'headlight',
  },
  {
    slug: 'wheels-interior',
    name_en: 'Wheels & Interior Packages',
    name_ar: 'حزم الجنوط والداخلية',
    desc_en:
      'Rim coatings, interior ceramic on high-touch panels & leather, and scratch-prone trims.',
    desc_ar:
      'طلاءات للجنوط وسيراميك داخلي للأجزاء كثيرة اللمس والجلد والتجهيزات المعرضة للخدش.',
    href: '/services#wheels',
    icon: 'wheels',
  },
]

function icon(name: Item['icon']) {
  // Minimal inline icons matched to dark UI
  switch (name) {
    case 'shield': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 2l7 3v6c0 5-3.5 9.3-7 11-3.5-1.7-7-6-7-11V5l7-3z"/></svg>`
    case 'sun': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M6.76 4.84l-1.8-1.79L3.17 4.84l1.79 1.8L6.76 4.84zM1 13h3v-2H1v2zm10 10h2v-3h-2v3zM4.84 17.24l1.8 1.79 1.79-1.79-1.8-1.8-1.79 1.8zM20 11v2h3v-2h-3zm-2.76-6.16l1.79-1.79-1.79-1.79-1.8 1.79 1.8 1.79zM12 6a6 6 0 100 12A6 6 0 0012 6zm7.16 11.24l-1.8-1.79-1.79 1.79 1.8 1.8 1.79-1.8z"/></svg>`
    case 'droplet': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 2s6 7.1 6 11.5S15.3 22 12 22s-6-3-6-8.5S12 2 12 2z"/></svg>`
    case 'headlight': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M13 6a7 7 0 110 12H7a3 3 0 01-3-3V9a3 3 0 013-3h6zm7 3h3v2h-3V9zm-1 4h4v2h-4v-2zm-2 4h6v2h-6v-2z"/></svg>`
    case 'interior': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M3 12l4-6h10l4 6-4 6H7l-4-6zm7 0a2 2 0 104 0 2 2 0 00-4 0z"/></svg>`
    case 'wheels': return `<svg viewBox="0 0 24 24" class="w-6 h-6"><path fill="currentColor" d="M12 2a10 10 0 1010 10A10 10 0 0012 2zm0 3a7 7 0 11-7 7 7 7 0 017-7zm0 2.5l2.8 1.2.7 3-2 2H10l-2-2 .7-3L12 7.5z"/></svg>`
  }
}
---

<section dir={dir} class="relative py-16 md:py-24">
  <div class="mx-auto max-w-7xl px-4 md:px-6">
    <header class="text-center mb-12 md:mb-16">
      <h1 class="text-3xl sm:text-4xl md:text-5xl font-bold text-white tracking-tight">
        {t.title}
      </h1>
      <p class="mt-4 text-base md:text-lg text-white/70 max-w-3xl mx-auto">
        {t.subtitle}
      </p>
    </header>

    <!-- Grid -->
    <div class="grid gap-6 md:gap-8 sm:grid-cols-2 lg:grid-cols-3">
      {items.map((s) => (
        <article id={s.slug}
          class="
            group relative rounded-2xl border border-white/10 bg-white/5
            backdrop-blur shadow-[0_8px_30px_rgba(0,0,0,.25)]
            hover:bg-white/8 transition
            p-5 md:p-6
          ">
          <div class="flex items-start justify-between">
            <div class="inline-flex h-11 w-11 items-center justify-center rounded-xl bg-white/10 text-white">
              <Fragment set:html={icon(s.icon)} />
            </div>
            {s.badge && (
              <span class="text-xs rounded-full bg-red-600/90 text-white px-2 py-1">
                {ar ? 'الأكثر طلباً' : s.badge}
              </span>
            )}
          </div>
          <h2 class="mt-4 text-lg md:text-xl font-semibold text-white">
            {ar ? s.name_ar : s.name_en}
          </h2>
          <p class="mt-2 text-sm md:text-[15px] leading-6 text-white/70">
            {ar ? s.desc_ar : s.desc_en}
          </p>

          <div class={`mt-5 flex ${ar ? 'flex-row-reverse' : ''} items-center gap-3`}>
            <a href="/contact" class="inline-flex items-center px-3 py-1.5 rounded-full text-sm font-medium
                     bg-red-600 hover:bg-red-500 text-white transition">
              {t.cta}
            </a>
            {s.href && (
              <a href={s.href} class="inline-flex items-center px-3 py-1.5 rounded-full text-sm
                        border border-white/15 text-white/90 hover:bg-white/10 transition">
                {t.learn}
              </a>
            )}
          </div>
        </article>
      ))}
    </div>
  </div>
</section>

<style>
  /* subtle moving glow */
  section::before{
    content:'';
    position:absolute; inset:-10% 0 auto 0; height:40%;
    background: radial-gradient(60% 60% at 50% 0%, rgba(191,30,46,.22), transparent 60%);
    filter: blur(40px);
    pointer-events:none;
  }
</style>
