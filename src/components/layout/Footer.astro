---
import { Icon } from 'astro-icon/components';
import { t, getLocalizedUrl, isRTL, type Locale } from "../../i18n/index.ts";
import FooterPaymentStrip from "../footer/FooterPaymentStrip.tsx";

const currentLocale = (Astro.currentLocale || 'en') as Locale;
const rtl = isRTL(Astro);
const currentYear = new Date().getFullYear();

const socialLinks = [
  { name: 'Facebook', icon: 'mdi:facebook', url: 'https://www.facebook.com/SUPAKOTO' },
  { name: 'TikTok', icon: 'simple-icons:tiktok', url: 'https://www.tiktok.com/@suapkoto.uae' },
  { name: 'Instagram', icon: 'mdi:instagram', url: 'https://www.instagram.com/supakotoofficial/' },
  { name: 'LinkedIn', icon: 'mdi:linkedin', url: 'https://www.linkedin.com/company/supakoto/' },
  { name: 'YouTube', icon: 'mdi:youtube', url: 'https://www.youtube.com/@supakoto94' },
];

const quickLinks = [
  { 
    name: currentLocale === 'ar' ? 'الرئيسية' : 'Home', 
    href: getLocalizedUrl('/', currentLocale, Astro), 
    icon: 'mdi:home', 
    description: 'Return to homepage' 
  },
  { 
    name: currentLocale === 'ar' ? 'الخدمات' : 'Services', 
    href: getLocalizedUrl('/services', currentLocale, Astro), 
    icon: 'mdi:wrench', 
    description: 'Explore our offerings' 
  },
  { 
    name: currentLocale === 'ar' ? 'المعرض' : 'Gallery', 
    href: getLocalizedUrl('/gallery', currentLocale, Astro), 
    icon: 'mdi:image-multiple', 
    description: 'View our work gallery' 
  },
  { 
    name: currentLocale === 'ar' ? 'من نحن' : 'About', 
    href: getLocalizedUrl('/about', currentLocale, Astro), 
    icon: 'mdi:information', 
    description: 'Learn about us' 
  },
  { 
    name: currentLocale === 'ar' ? 'اتصل بنا' : 'Contact', 
    href: getLocalizedUrl('/contact', currentLocale, Astro), 
    icon: 'mdi:phone', 
    description: 'Get in touch' 
  },
];

const contactInfo = [
  { 
    icon: 'mdi:phone', 
    text: '+201224464637', 
    href: 'tel:+201224464637' 
  },
  { 
    icon: 'mdi:email', 
    text: t('footer.contact_email', {}, { locale: currentLocale }) || 'info@supakoto.com', 
    href: 'mailto:info@supakoto.com' 
  },
  { 
    icon: 'mdi:map-marker', 
    text: currentLocale === 'ar' ? 
      'اعثر على أقرب فرع إليك' :
      'Find your nearest address', 
    href: getLocalizedUrl('/contact', currentLocale, Astro) 
  },
];
---

<footer class="bg-gradient-to-br from-background via-background/95 to-background/90 text-foreground backdrop-blur-sm border-t border-foreground/20" dir={rtl ? 'rtl' : 'ltr'}>
  <!-- Main Footer Content -->
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 md:py-16">
    <div class="grid grid-cols-1 lg:grid-cols-4 gap-8 lg:gap-12">
      
      <!-- Company Info -->
      <div class={`lg:col-span-2 text-center lg:text-${rtl ? 'right' : 'left'}`}>
        <!-- Logo Section -->
        <div class="mb-6">
          <a href={getLocalizedUrl('/', currentLocale, Astro)} class="inline-block group">
            <img 
              src="/logo.svg" 
              alt="SupaKoto - Professional Paint Protection Film Services" 
              class={`h-16 lg:h-20 w-auto group-hover:scale-105 transition-transform duration-300 mx-auto lg:m${rtl ? 'r' : 'l'}-0`}
            />
          </a>
        </div>
        
        <!-- Company Description -->
        <div class="mb-6">
          <p class={`text-muted-foreground text-base lg:text-lg leading-relaxed max-w-xl mx-auto lg:m${rtl ? 'r' : 'l'}-0`}>
            {currentLocale === 'ar' ? 'قيادة التميز بحماية فائقة وتخصيص لا مثيل له.' : 'Driving excellence with premium protection and unparalleled customization.'}
          </p>
        </div>
        
        <!-- Social Media Section -->
        <div class="space-y-4">
          <h3 class={`text-lg font-semibold text-foreground flex items-center justify-center lg:justify-${rtl ? 'end' : 'start'} gap-2 ${rtl ? 'flex-row-reverse' : ''}`}>
            <div class="p-1.5 bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg">
              <Icon name="mdi:share-variant" class="h-4 w-4 text-primary" />
            </div>
            {currentLocale === 'ar' ? 'تواصل معنا' : 'Connect With Us'}
          </h3>
          
          <div class={`flex items-center justify-center lg:justify-${rtl ? 'end' : 'start'} gap-3 ${rtl ? 'flex-row-reverse' : ''}`}>
            {socialLinks.map((item) => (
              <a 
                href={item.url} 
                target="_blank" 
                rel="noopener noreferrer" 
                class="group p-3 bg-gradient-to-br from-muted/30 to-muted/20 hover:from-primary/20 hover:to-primary/10 text-muted-foreground hover:text-primary rounded-xl transition-all duration-300 hover:scale-110 hover:shadow-lg hover:shadow-primary/20 border border-muted/20 hover:border-primary/30"
              >
                <span class="sr-only">{item.name}</span>
                <Icon name={item.icon} class="h-5 w-5" />
              </a>
            ))}
          </div>
          
          <!-- Additional Info -->
          <div class="pt-4 border-t border-muted/20">
            <p class={`text-sm text-muted-foreground text-center lg:text-${rtl ? 'right' : 'left'}`}>
              {currentLocale === 'ar' ? 'استمتع بالتميز في عالم السيارات مع سوباكوتو' : 'Experience automotive excellence with SupaKoto'}
            </p>
          </div>
        </div>
      </div>

      <!-- Quick Links -->
      <div class={`lg:col-span-1 ${rtl ? 'lg:order-last' : ''}`}>
        <!-- Section Header -->
        <div class="mb-6">
          <h3 class={`text-lg font-semibold text-foreground mb-3 flex items-center justify-center lg:justify-${rtl ? 'end' : 'start'} gap-2 ${rtl ? 'flex-row-reverse' : ''}`}>
            <div class="p-1.5 bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg">
              <Icon name="mdi:link-variant" class="h-4 w-4 text-primary" />
            </div>
            {currentLocale === 'ar' ? 'روابط سريعة' : 'Quick Links'}
          </h3>
        </div>
        
        <!-- Navigation Links -->
        <div class="space-y-2">
          {quickLinks.map((link) => (
            <a 
              href={link.href} 
              class={`group flex items-center gap-3 p-3 bg-gradient-to-br from-muted/20 to-muted/10 hover:from-primary/15 hover:to-primary/5 rounded-lg border border-muted/20 hover:border-primary/30 transition-all duration-300 hover:scale-[1.02] ${rtl ? 'flex-row-reverse' : ''}`}
            >
              <div class="p-1.5 bg-gradient-to-br from-muted/40 to-muted/20 group-hover:from-primary/25 group-hover:to-primary/15 rounded-md transition-all duration-300">
                <Icon 
                  name={link.icon} 
                  class="h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors duration-300" 
                />
              </div>
              <div class="flex-1">
                <span class={`text-sm font-medium text-foreground group-hover:text-primary transition-colors duration-300 block text-${rtl ? 'right' : 'left'}`}>
                  {link.name}
                </span>
              </div>
              <Icon 
                name={rtl ? 'mdi:chevron-left' : 'mdi:chevron-right'} 
                class={`h-3 w-3 text-muted-foreground group-hover:text-primary transition-all duration-300 group-hover:translate-x-${rtl ? '-0.5' : '0.5'}`} 
              />
            </a>
          ))}
        </div>
      </div>

      <!-- Contact Info -->
      <div class="lg:col-span-1">
        <!-- Section Header -->
        <div class="mb-6">
          <h3 class={`text-lg font-semibold text-foreground mb-3 flex items-center justify-center lg:justify-${rtl ? 'end' : 'start'} gap-2 ${rtl ? 'flex-row-reverse' : ''}`}>
            <div class="p-1.5 bg-gradient-to-br from-primary/20 to-primary/10 rounded-lg">
              <Icon name="mdi:contact-mail" class="h-4 w-4 text-primary" />
            </div>
            {currentLocale === 'ar' ? 'معلومات التواصل' : 'Contact Info'}
          </h3>
        </div>
        
        <!-- Contact Links -->
        <div class="space-y-3">
          {contactInfo.map((contact) => (
            <a 
              href={contact.href} 
              class={`group flex items-start gap-3 p-3 bg-gradient-to-br from-muted/20 to-muted/10 hover:from-primary/15 hover:to-primary/5 rounded-lg border border-muted/20 hover:border-primary/30 transition-all duration-300 hover:scale-[1.02] ${rtl ? 'flex-row-reverse text-right' : ''}`}
            >
              <div class="p-1.5 bg-gradient-to-br from-muted/40 to-muted/20 group-hover:from-primary/25 group-hover:to-primary/15 rounded-md transition-all duration-300 flex-shrink-0">
                <Icon 
                  name={contact.icon} 
                  class="h-4 w-4 text-muted-foreground group-hover:text-primary transition-colors duration-300" 
                />
              </div>
              <span class={`text-sm text-foreground group-hover:text-primary transition-colors duration-300 leading-relaxed ${rtl ? 'text-right' : 'text-left'} flex-1`}>
                {contact.text}
              </span>
            </a>
          ))}
        </div>
        
      </div>
    </div>
  </div>

  <!-- Payment Methods Strip -->
  <FooterPaymentStrip client:load lang={currentLocale} />

  <!-- Bottom Bar -->
  <div class="border-t border-foreground/10 bg-background/50">
    <div class="container mx-auto px-4 py-4">
      <div class={`flex flex-col sm:flex-row items-center justify-between gap-3 ${rtl ? 'sm:flex-row-reverse' : ''}`}>
        <div class={`flex flex-col sm:flex-row items-center gap-3 text-sm text-muted-foreground ${rtl ? 'sm:flex-row-reverse text-right' : ''}`}>
          <p class={rtl ? 'text-right' : 'text-left'}>
            &copy; {currentYear} {currentLocale === 'ar' ? 'سوباكوتو' : 'SupaKoto'}. {currentLocale === 'ar' ? 'جميع الحقوق محفوظة.' : 'All rights reserved.'}
          </p>
          <div class="hidden sm:block w-px h-4 bg-foreground/20"></div>
          <div class={`flex items-center gap-4 ${rtl ? 'flex-row-reverse' : ''}`}>
            <a href={getLocalizedUrl('/privacy', currentLocale, Astro)} class="hover:text-primary transition-colors duration-300">
              {currentLocale === 'ar' ? 'سياسة الخصوصية' : 'Privacy Policy'}
            </a>
            <a href={getLocalizedUrl('/terms', currentLocale, Astro)} class="hover:text-primary transition-colors duration-300">
              {currentLocale === 'ar' ? 'شروط الخدمة' : 'Terms of Service'}
            </a>
          </div>
        </div>
        

<!-- RTL-Fixed "Made with" section -->
<div class={`flex items-center gap-2 text-sm text-muted-foreground ${rtl ? 'flex-row-reverse' : ''}`}>
  {currentLocale === 'ar' ? (
    <>
      <span>من فريق سوباكوتو</span>
      <Icon name="mdi:heart" class="h-4 w-4 text-red-500 animate-pulse" />
      <span>صُنع بـ</span>
    </>
  ) : (
    <>
      <span>Made with</span>
      <Icon name="mdi:heart" class="h-4 w-4 text-red-500 animate-pulse" />
      <span>by SupaKoto Team</span>
    </>
  )}
</div>
        </div>
      </div>
    </div>
  </div>
</footer>